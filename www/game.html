<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: content: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
    <script src="components/loader.js"></script>
    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    
<script>
$(function(){
    $(window).on('touchmove.noScroll', function(e) {
    e.preventDefault();
    });

    $("game.html").ready(function() {
    var current = $('.counter').text();
    $({count: 3}).animate({count: current}, {
        duration: 2000,
        easing: 'linear',
        progress: function() { 
            $('.counter').text(Math.ceil(this.count)); 
        }
    });
    });
    
    setTimeout(function(){
        $('.start').show();
    },3500);

    setTimeout(function(){
        $('.counter').hide();
    },3500);
    
    setTimeout(function(){
        $('.start').hide();
    },4500);
    

    setTimeout(function(){
    
    var clickEventType=((window.ontouchstart!==null)?'click':'touchstart');

    $(".bar1").on(clickEventType, function(){
        $(".bar5").animate({height: "-=15",}, 100 ); 
     });
     
    $(".bar2").on(clickEventType, function(){
        $(".bar6").animate({height: "-=15",}, 100 );   
    });
    
    $(".bar3").on(clickEventType, function(){
        $(".bar7").animate({height: "-=15",}, 100 );  
    });
    
    $(".bar4").on(clickEventType, function(){
        $(".bar8").animate({height: "-=15",}, 100 );   
    });
    
    $(".bar5").on(clickEventType, function(){
        $(this).animate({height: "+=15",}, 100 );
    });
    
    $(".bar6").on(clickEventType, function(){
        $(this).animate({height: "+=15",}, 100 );    
    });
    
    $(".bar7").on(clickEventType, function(){
        $(this).animate({height: "+=15",}, 100 );      
    });
    
    $(".bar8").on(clickEventType, function(){
        $(this).animate({height: "+=15"}, 100 );     
    });
    },3500);
    
    setTimeout(function(){
        $("div").off("touchstart");
        var bar1 = $(".bar1").height();
        var bar5 = $(".bar5").height();
        var row1 = bar1 - bar5
        var bar2 = $(".bar2").height();
        var bar6 = $(".bar6").height();
        var row2 = bar2 - bar6
        var bar3 = $(".bar3").height();
        var bar7 = $(".bar7").height();
        var row3 = bar3 - bar7
        var bar4 = $(".bar4").height();
        var bar8 = $(".bar8").height();
        var row4 = bar4 - bar8
        var w = $(window).height() * 2;
        var r = w - row1 - row2 - row3 - row4
        
    if (r == 0) {
        $(".kekka").text("引き分け！");
    } else if (r < 0) {
        $(".kekka").text("黄色の勝ち！");
    } else {
        $(".kekka").text("青の勝ち！");
    }
        $('.result').show();
    },15000);

    
});

</script>
</head>
<body>
    <p><span class="counter">1</span></p>
    <div class="start" style="display: none;">START</div>
    <div class="bar1"></div>
    <div class="bar2"></div>
    <div class="bar3"></div>
    <div class="bar4"></div>
    <div class="bar5"></div>
    <div class="bar6"></div>
    <div class="bar7"></div>
    <div class="bar8"></div>
    <div class="result" style="display: none;">
        <span class="kekka"></span>
    </div>
</body>
</html>